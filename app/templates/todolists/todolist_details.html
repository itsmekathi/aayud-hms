{% extends "layout.html" %}
{% block content %}
{% if todo_items %}
<div class="content-section">
    <h2>Existing Data for To-Do List: {{todo_list.title}} <span class="badge badge-primary">{{ todo_items|length }}</span> </h2>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <td>#</td>
                <td>Title</td>
                <td>Description</td>
                <td>Status</td>
                <td>Priority</td>
                <td>Urgency</td>
                <td>Date Created</td>
                <td>Scheduled Date</td>
                <td>Estimated Duration</td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            {% for todo_item in todo_items %}
            <tr>
                <td>{{ loop.index }}</td>
                <td><a href="{{url_for('todolists.edit_todoitem', todoitem_id=todo_item.id)}}">{{ todo_item.title }} <i class="fas fa-edit" aria-hidden="true"></i></a></td>
                <td>{{ todo_item.description }}</td>
                <td>{{ todo_item.task_status.name }}</td>
                <td>{{ todo_item.task_priority.name }}</td>
                <td>{{ todo_item.task_urgency.name }}</td>
                <td>{{ todo_item.date_created.strftime("%d %B %Y") }}</td>
                <td>{{ todo_item.scheduled_date.strftime("%d %B %Y") }}</td>
                <td>{{ todo_item.estimated_duration_hours}} Hours and {{todo_item.estimated_duration_minutes}} minutes
                </td>
                <td>
                    <form action="{{url_for('todolists.delete_todoitem', todoitem_id=todo_item.id)}}" method="POST">
                        <input type="submit" value="Delete" class="btn btn-danger">
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="content-section">
    <h2>No Items found</h2>
</div>
{% endif %}
<div class="Add new Item">
    <a class="btn btn-primary" href="{{ url_for('todolists.todoitem_new', todolist_id=todo_list.id) }}">Add new Item</a>
</div>
{% endblock content %}